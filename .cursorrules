{
  "rules": [
    {
      "name": "前端源代码",
      "glob": "src/frontend/**/*.{js,jsx,ts,tsx,vue}",
      "use": ["cursor-core", "cursor-web"]
    },
    {
      "name": "后端Python代码",
      "glob": "src/backend/**/*.py",
      "use": ["cursor-core", "cursor-python"]
    },
    {
      "name": "数据分析脚本",
      "glob": "src/analysis/**/*.{py,ipynb}",
      "use": ["cursor-core", "cursor-python", "cursor-notebook"]
    },
    {
      "name": "配置文件",
      "glob": "**/*.{json,yaml,yml,ini,conf}",
      "use": ["cursor-core"]
    },
    {
      "name": "数据库模型",
      "glob": "src/backend/models/**/*.py",
      "use": ["cursor-core", "cursor-python", "cursor-db"]
    },
    {
      "name": "测试文件",
      "glob": "tests/**/*.{py,js,ts}",
      "use": ["cursor-core", "cursor-python", "cursor-web"]
    },
    {
      "name": "文档文件",
      "glob": "**/*.md",
      "use": ["cursor-core", "cursor-docs"]
    },
    {
      "name": "策略开发规则",
      "glob": "src/backend/strategy/**/*.py",
      "use": ["cursor-core", "cursor-python"],
      "rules": [
        "🚨 严禁使用未来数据生成交易信号",
        "必须使用滚动窗口或逐日计算指标",
        "每个时间点只能使用该时间点及之前的数据",
        "策略必须通过数据扩展测试验证",
        "交易记录在数据扩展后必须保持一致",
        "使用逐日循环生成信号，不要使用全量数据",
        "添加详细日志记录策略执行过程"
      ]
    },
    {
      "name": "数据库备份保护规则",
      "glob": "data/backup/**/*",
      "use": ["cursor-core"],
      "rules": [
        "🚨 严禁修改 data/backup 文件夹中的任何文件",
        "🚨 严禁删除 data/backup 文件夹中的任何文件",
        "🚨 严禁移动 data/backup 文件夹中的任何文件",
        "🚨 严禁重命名 data/backup 文件夹中的任何文件",
        "🚨 严禁覆盖 data/backup 文件夹中的任何文件",
        "这些是重要的数据库备份文件，必须保持原样",
        "如果需要操作备份文件，必须先征得用户明确同意",
        "任何涉及 data/backup 的操作都必须先警告用户"
      ]
    },
    {
      "name": "数据库表结构变更规则",
      "glob": "src/backend/models/**/*.py",
      "use": ["cursor-core", "cursor-python", "cursor-db"],
      "rules": [
        "🚨 严禁直接修改数据库表结构",
        "任何表结构变更必须提前写明以下内容:",
        "- 变更的具体表名",
        "- 变更的字段详情(新增/修改/删除)",
        "- 变更原因",
        "- 变更可能带来的影响",
        "- 数据迁移方案",
        "必须经过用户明确确认后才能执行变更",
        "表结构变更后需要更新相关文档"
      ]
    },
    {
      "name": "策略数据库管理规则",
      "glob": "src/backend/strategy/**/*.py",
      "use": ["cursor-core", "cursor-python", "cursor-db"],
      "rules": [
        "🚨 所有交易策略必须存储在数据库中",
        "🚨 严禁直接修改策略源代码文件",
        "🚨 回测系统从数据库读取策略代码执行",
        "更新策略时必须满足以下要求:",
        "- 向用户说明需要更新的具体内容",
        "- 说明更新的原因和预期效果",
        "- 必须等待用户明确同意后才能更新",
        "- 保留原有策略的参数配置",
        "- 记录更新时间和更新内容",
        "发现策略代码问题时:",
        "- 先分析具体原因",
        "- 提供详细的问题说明",
        "- 给出建议的修复方案",
        "- 等待用户同意后再修改",
        "重要策略更新需要在数据库中保留修改记录"
      ]
    },
    {
      "name": "项目代码通读规则",
      "glob": "**/*.{py,js,jsx,ts,tsx,vue,md}",
      "use": ["cursor-core", "cursor-python", "cursor-web", "cursor-docs"],
      "rules": [
        "🚨 通读项目代码时必须同时阅读数据库策略表中的所有具体策略内容",
        "必须深入理解整个框架的运行流程和工作原理",
        "必须全面掌握系统各模块间的交互关系",
        "阅读代码时需要关注以下要点:",
        "- 数据流向和处理逻辑",
        "- 策略执行机制和调用关系",
        "- 回测引擎的工作原理",
        "- 前后端交互接口",
        "- 数据库表结构和关联关系",
        "- 参数优化流程",
        "- 错误处理和异常机制",
        "确保对系统架构有完整的理解后再进行任何修改"
      ]
    }
  ]
}