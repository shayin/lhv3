# 回测时间范围选项增强说明

## 功能概述

为回测分析界面的日期选择器添加了更多长期时间范围选项，包括最近5年、最近7年、最近10年，方便用户进行长期策略回测分析。

## 新增选项

### 原有选项
- Last 7 days (最近7天)
- Last 30 days (最近30天)
- Last 3 months (最近3个月)
- Last 6 months (最近6个月)
- Last 1 year (最近1年)
- Last 3 years (最近3年)

### 新增选项
- **Last 5 years** (最近5年)
- **Last 7 years** (最近7年)
- **Last 10 years** (最近10年)

## 技术实现

### 日期选择器配置
```typescript
<DatePicker.RangePicker
  value={dateRange}
  onChange={setDateRange}
  presets={[
    {
      label: 'Last 7 days',
      value: [dayjs().subtract(7, 'day'), dayjs()]
    },
    {
      label: 'Last 30 days',
      value: [dayjs().subtract(30, 'day'), dayjs()]
    },
    {
      label: 'Last 3 months',
      value: [dayjs().subtract(3, 'month'), dayjs()]
    },
    {
      label: 'Last 6 months',
      value: [dayjs().subtract(6, 'month'), dayjs()]
    },
    {
      label: 'Last 1 year',
      value: [dayjs().subtract(1, 'year'), dayjs()]
    },
    {
      label: 'Last 3 years',
      value: [dayjs().subtract(3, 'year'), dayjs()]
    },
    // 新增的长期选项
    {
      label: 'Last 5 years',
      value: [dayjs().subtract(5, 'year'), dayjs()]
    },
    {
      label: 'Last 7 years',
      value: [dayjs().subtract(7, 'year'), dayjs()]
    },
    {
      label: 'Last 10 years',
      value: [dayjs().subtract(10, 'year'), dayjs()]
    }
  ]}
/>
```

### 日期计算逻辑
使用 `dayjs().subtract(n, 'year')` 来计算从当前日期往前推n年的日期：

- **最近5年**: `dayjs().subtract(5, 'year')` 到 `dayjs()`
- **最近7年**: `dayjs().subtract(7, 'year')` 到 `dayjs()`
- **最近10年**: `dayjs().subtract(10, 'year')` 到 `dayjs()`

## 使用场景

### 1. 长期策略验证
- **5年回测**: 验证策略在中等时间周期内的稳定性
- **7年回测**: 包含完整的经济周期，验证策略的适应性
- **10年回测**: 长期策略验证，包含多个市场周期

### 2. 不同市场环境测试
- **牛市周期**: 测试策略在上涨市场中的表现
- **熊市周期**: 验证策略在下跌市场中的抗风险能力
- **震荡市场**: 评估策略在横盘整理中的适应性

### 3. 策略参数优化
- **长期数据**: 为参数优化提供更多历史数据
- **统计显著性**: 增加样本量，提高统计结果的可靠性
- **过拟合风险**: 长期数据有助于减少过拟合问题

## 实际应用示例

### 场景1: 极大极小值策略长期验证
```
选择策略: 极大极小值策略
选择股票: 特斯拉 (TSLA)
时间范围: Last 5 years (2019-09-20 至 2024-09-20)
目的: 验证策略在5年内的表现
```

### 场景2: 策略参数优化
```
选择策略: MA交叉策略
选择股票: 苹果 (AAPL)
时间范围: Last 10 years (2014-09-20 至 2024-09-20)
目的: 使用10年数据进行参数优化
```

### 场景3: 多周期对比分析
```
短期回测: Last 1 year
中期回测: Last 5 years
长期回测: Last 10 years
目的: 对比策略在不同时间周期的表现
```

## 性能考虑

### 1. 数据量影响
- **5年数据**: 约1,250个交易日
- **7年数据**: 约1,750个交易日
- **10年数据**: 约2,500个交易日

### 2. 回测性能
- **计算时间**: 长期回测需要更多计算时间
- **内存使用**: 大量历史数据需要更多内存
- **结果展示**: 长期回测结果更丰富，需要优化展示

### 3. 用户体验
- **加载时间**: 长期回测可能需要等待
- **进度提示**: 建议添加进度条显示
- **结果缓存**: 考虑缓存长期回测结果

## 最佳实践

### 1. 回测策略选择
- **短期策略**: 适合1-3年回测
- **中期策略**: 适合3-7年回测
- **长期策略**: 适合7-10年回测

### 2. 数据质量要求
- **数据完整性**: 确保长期数据无缺失
- **数据准确性**: 验证历史数据的准确性
- **数据一致性**: 保持数据格式的一致性

### 3. 结果分析
- **多维度分析**: 从不同角度分析长期结果
- **风险控制**: 关注长期回测中的风险指标
- **策略适应性**: 评估策略在不同市场环境中的表现

## 总结

通过添加最近5年、最近7年、最近10年的选项，回测分析功能得到了显著增强：

✅ **更全面的时间覆盖**: 支持从短期到超长期的策略验证
✅ **更丰富的分析维度**: 可以对比不同时间周期的策略表现
✅ **更可靠的参数优化**: 长期数据提供更稳定的优化结果
✅ **更专业的回测体验**: 满足专业投资者的长期分析需求

这些新增选项特别适合：
- 专业投资者进行长期策略验证
- 量化研究员进行策略参数优化
- 风险管理团队进行压力测试
- 投资顾问进行客户策略分析
