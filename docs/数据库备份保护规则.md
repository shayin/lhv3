# 数据库备份保护规则

## 🚨 重要警告

**`data/backup/` 文件夹中的数据库备份文件受到严格保护，严禁任何形式的修改、删除、移动或重命名操作！**

## 📋 保护规则

### 1. 绝对禁止的操作
- ❌ **严禁修改** `data/backup/` 文件夹中的任何文件
- ❌ **严禁删除** `data/backup/` 文件夹中的任何文件
- ❌ **严禁移动** `data/backup/` 文件夹中的任何文件
- ❌ **严禁重命名** `data/backup/` 文件夹中的任何文件
- ❌ **严禁覆盖** `data/backup/` 文件夹中的任何文件

### 2. 保护机制

#### 2.1 .cursorignore 保护
```
# 🚨 重要：数据库备份文件夹 - 严禁修改
data/backup/
data/backup/**
*.db.backup
*.db.bak
```

#### 2.2 .cursorrules 保护
```json
{
  "name": "数据库备份保护规则",
  "glob": "data/backup/**/*",
  "rules": [
    "🚨 严禁修改 data/backup 文件夹中的任何文件",
    "🚨 严禁删除 data/backup 文件夹中的任何文件",
    "🚨 严禁移动 data/backup 文件夹中的任何文件",
    "🚨 严禁重命名 data/backup 文件夹中的任何文件",
    "🚨 严禁覆盖 data/backup 文件夹中的任何文件"
  ]
}
```

### 3. 特殊情况处理

#### 3.1 如果需要操作备份文件
1. **必须先征得用户明确同意**
2. **必须详细说明操作原因和影响**
3. **必须提供备份文件的备份**
4. **必须记录操作日志**

#### 3.2 紧急情况
- 只有在系统严重故障且用户明确授权的情况下
- 必须创建额外的备份副本
- 必须记录所有操作步骤

## 📁 备份文件夹结构

```
data/backup/
├── backtesting_20250914_1102.db    # 2025年9月14日备份
├── backtesting_20250917_2350.db    # 2025年9月17日备份
├── backtesting_20250918_0000.db    # 2025年9月18日备份
├── backtesting_20250918_0039.db    # 2025年9月18日备份
├── backtesting_20250922_2256.db    # 2025年9月22日备份
├── backtesting_20250923_2210.db    # 2025年9月23日备份
├── backtesting_20250924_1436.db    # 2025年9月24日备份
├── backtesting_20250924_2220.db    # 2025年9月24日备份
└── backtesting_20250925_0022.db    # 2025年9月25日备份
```

## ⚠️ 违规后果

### 1. 自动保护
- Cursor AI 会自动拒绝任何涉及 `data/backup/` 的操作
- 系统会显示警告信息
- 操作会被自动阻止

### 2. 手动检查
- 定期检查备份文件完整性
- 验证备份文件时间戳
- 确认备份文件未被修改

## 🔒 安全建议

### 1. 定期验证
```bash
# 检查备份文件完整性
ls -la data/backup/
# 验证文件时间戳
stat data/backup/*.db
```

### 2. 权限设置
```bash
# 设置只读权限（可选）
chmod 444 data/backup/*.db
```

### 3. 监控日志
- 记录所有访问备份文件夹的操作
- 监控文件修改时间
- 设置异常告警

## 📝 操作日志

### 保护规则生效时间
- **创建时间**: 2025年9月25日
- **规则版本**: v1.0
- **保护范围**: `data/backup/` 文件夹及其所有子文件

### 规则更新记录
- **v1.0** (2025-09-25): 初始创建保护规则
- 添加 .cursorignore 保护
- 添加 .cursorrules 保护
- 创建保护说明文档

## 🎯 总结

这些保护规则确保了：
1. **数据安全**: 备份文件不会被意外修改或删除
2. **历史完整**: 保留完整的历史数据记录
3. **系统稳定**: 避免因备份文件损坏导致的系统问题
4. **合规操作**: 所有操作都需要明确授权

**记住：备份文件是系统的重要资产，必须严格保护！**
